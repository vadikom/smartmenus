/*! SmartMenus jQuery Plugin Keyboard Addon - v0.4.0 - November 3, 2022
 * http://www.smartmenus.org/
 * Copyright Vasil Dinkov, Vadikom Web Ltd. http://vadikom.com; Licensed MIT */!function(a){"function"==typeof define&&define.amd?define(["jquery","smartmenus"],a):"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(a){return a.find("> li > a:not(.disabled), > li > :not(ul) a:not(.disabled)").eq(0)}function c(a){return a.find("> li > a:not(.disabled), > li > :not(ul) a:not(.disabled)").eq(-1)}function d(a,c){var d=a.nextAll("li").find("> a:not(.disabled), > :not(ul) a:not(.disabled)").eq(0);return c||d.length?d:b(a.parent())}function e(b,d){var e=b.prevAll("li").find("> a:not(.disabled), > :not(ul) a:not(.disabled)").eq(/^1\.8\./.test(a.fn.jquery)?0:-1);return d||e.length?e:c(b.parent())}return a.fn.focusSM=function(){return this.length&&this[0].focus&&this[0].focus(),this},a.extend(a.SmartMenus.Keyboard={},{docKeydown:function(f){var g=f.keyCode;if(/^(37|38|39|40)$/.test(g)){var h=a(this),i=h.data("smartmenus"),j=a(f.target);if(i&&j.is("a")&&i.handleItemEvents(j)){var k=j.closest("li"),l=k.parent(),m=l.dataSM("level");switch(h.hasClass("sm-rtl")&&(37==g?g=39:39==g&&(g=37)),g){case 37:if(i.isCollapsible())break;m>2||2==m&&h.hasClass("sm-vertical")?i.activatedItems[m-2].focusSM():h.hasClass("sm-vertical")||e((i.activatedItems[0]||j).closest("li")).focusSM();break;case 38:if(i.isCollapsible()){var n;m>1&&(n=b(l)).length&&j[0]==n[0]?i.activatedItems[m-2].focusSM():e(k).focusSM()}else 1==m&&!h.hasClass("sm-vertical")&&i.opts.bottomToTopSubMenus?(!i.activatedItems[0]&&j.dataSM("sub")&&(i.opts.showOnClick&&(i.clickActivated=!0),i.itemActivate(j),j.dataSM("sub").is(":visible")&&(i.focusActivated=!0)),i.activatedItems[0]&&i.activatedItems[0].dataSM("sub")&&i.activatedItems[0].dataSM("sub").is(":visible")&&!i.activatedItems[0].dataSM("sub").hasClass("mega-menu")&&c(i.activatedItems[0].dataSM("sub")).focusSM()):(m>1||h.hasClass("sm-vertical"))&&e(k).focusSM();break;case 39:if(i.isCollapsible())break;1==m&&h.hasClass("sm-vertical")?(!i.activatedItems[0]&&j.dataSM("sub")&&(i.opts.showOnClick&&(i.clickActivated=!0),i.itemActivate(j),j.dataSM("sub").is(":visible")&&(i.focusActivated=!0)),i.activatedItems[0]&&i.activatedItems[0].dataSM("sub")&&i.activatedItems[0].dataSM("sub").is(":visible")&&!i.activatedItems[0].dataSM("sub").hasClass("mega-menu")&&b(i.activatedItems[0].dataSM("sub")).focusSM()):1!=m&&(!i.activatedItems[m-1]||i.activatedItems[m-1].dataSM("sub")&&i.activatedItems[m-1].dataSM("sub").is(":visible")&&!i.activatedItems[m-1].dataSM("sub").hasClass("mega-menu"))||h.hasClass("sm-vertical")?i.activatedItems[m-1]&&i.activatedItems[m-1].dataSM("sub")&&i.activatedItems[m-1].dataSM("sub").is(":visible")&&!i.activatedItems[m-1].dataSM("sub").hasClass("mega-menu")&&b(i.activatedItems[m-1].dataSM("sub")).focusSM():d((i.activatedItems[0]||j).closest("li")).focusSM();break;case 40:if(i.isCollapsible()){var o,p;if(i.activatedItems[m-1]&&i.activatedItems[m-1].dataSM("sub")&&i.activatedItems[m-1].dataSM("sub").is(":visible")&&!i.activatedItems[m-1].dataSM("sub").hasClass("mega-menu")&&(o=b(i.activatedItems[m-1].dataSM("sub"))).length)o.focusSM();else if(m>1&&(p=c(l)).length&&j[0]==p[0]){for(var q=i.activatedItems[m-2].closest("li"),r=null;q.is("li")&&!(r=d(q,!0)).length;)q=q.parent().parent();r.length?r.focusSM():b(h).focusSM()}else d(k).focusSM()}else 1!=m||h.hasClass("sm-vertical")||i.opts.bottomToTopSubMenus?(m>1||h.hasClass("sm-vertical"))&&d(k).focusSM():(!i.activatedItems[0]&&j.dataSM("sub")&&(i.opts.showOnClick&&(i.clickActivated=!0),i.itemActivate(j),j.dataSM("sub").is(":visible")&&(i.focusActivated=!0)),i.activatedItems[0]&&i.activatedItems[0].dataSM("sub")&&i.activatedItems[0].dataSM("sub").is(":visible")&&!i.activatedItems[0].dataSM("sub").hasClass("mega-menu")&&b(i.activatedItems[0].dataSM("sub")).focusSM())}f.stopPropagation(),f.preventDefault()}}}}),a(document).on("keydown.smartmenus","ul.sm, ul.navbar-nav:not([data-sm-skip])",a.SmartMenus.Keyboard.docKeydown),a.extend(a.SmartMenus.prototype,{keyboardSetHotkey:function(c,d){var e=this;a(document).on("keydown.smartmenus"+this.rootId,function(f){if(c==f.keyCode){var g=!0;d&&("string"==typeof d&&(d=[d]),a.each(["ctrlKey","shiftKey","altKey","metaKey"],function(b,c){if(a.inArray(c,d)>=0&&!f[c]||a.inArray(c,d)<0&&f[c])return g=!1,!1})),g&&(b(e.$root).focusSM(),f.stopPropagation(),f.preventDefault())}})}}),a});